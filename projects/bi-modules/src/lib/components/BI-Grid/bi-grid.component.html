<link rel="stylesheet" href="../../../../../../node_modules/sweetalert2/src/sweetalert2.scss">
<kendo-grid #Grid [filterable]="'menu'" [data]="GridData | async" [pageable]="true"
    [pageSize]="state.take ? state.take : 0" [sortable]="true" [skip]="state.skip? state.skip: 0" [resizable]="true"
    [selectable]="true" [kendoGridReactiveEditing]="createFormGroup" (cellClick)="cellClickHandler($event)"
    (dataStateChange)="onValueChange($event)" (cellClose)="cellCloseHandler($event)">
    <ng-container *ngFor="let res of Columns" [ngSwitch]="res.controlType">
        <kendo-grid-column [hidden]="!res.IsVisible" *ngSwitchCase="'text'" [field]="res.Name" [title]="res.DisplayName"
            [width]="150">
            <ng-template kendoGridEditTemplate let-dataItem="dataItem" let-formGroup="formGroup">
                <kendo-textbox [formControl]="formGroup.controls[res.Name]" [value]="DefaultValueForm[res.Name]"
                    (change)="bindingData($event, res.Name)"></kendo-textbox>
                <span *ngIf="submitted && formGroup.get(res.Name).invalid">
                    <span class="text-danger" *ngIf="formGroup.get(res.Name).errors?.required">
                        {{res.DisplayName}} is required
                    </span>
                    <span class="text-danger" *ngIf="formGroup.get(res.Name).errors?.email">
                        Email address is invalid
                    </span>
                </span>
            </ng-template>
            <ng-template kendoGridCellTemplate let-dataItem>
                {{ dataItem?.[res.Name] }}
            </ng-template>
        </kendo-grid-column>

        <kendo-grid-column [hidden]="!res.IsVisible" *ngSwitchCase="'numeric'" [field]="res.Name"
            [title]="res.DisplayName" [width]="150">
            <ng-template kendoGridEditTemplate let-dataItem="dataItem" let-formGroup="formGroup">
                <input [formControl]="formGroup.controls[res.Name]" type="number" class="form-control"
                    [value]="DefaultValueForm[res.Name]" (change)="bindingData($event, res.Name)">
                <span class="text-danger" *ngIf="submitted && formGroup.get(res.Name).errors?.required">
                    {{res.DisplayName}} is required
                </span>
            </ng-template>
            <ng-template kendoGridCellTemplate let-dataItem>
                {{ dataItem?.[res.Name] }}
            </ng-template>
        </kendo-grid-column>

        <kendo-grid-column [hidden]="!res.IsVisible" *ngSwitchCase="'date'" [field]="res.Name" [title]="res.DisplayName"
            [width]="150">
            <ng-template kendoGridEditTemplate let-dataItem="dataItem" let-formGroup="formGroup">
                <kendo-datepicker [formControl]="formGroup.controls[res.Name]" [value]="DefaultValueForm[res.Name]"
                    (change)="bindingData($event, res.Name)" calendarType="classic"></kendo-datepicker>
                <span class="text-danger" *ngIf="submitted && formGroup.get(res.Name).errors?.required">
                    {{res.DisplayName}} is required
                </span>
            </ng-template>
            <ng-template kendoGridCellTemplate let-dataItem>
                {{ dataItem?.[res.Name] }}
            </ng-template>
        </kendo-grid-column>

        <kendo-grid-column [hidden]="!res.IsVisible" *ngSwitchCase="'boolean'" [hidden]="!res.IsVisible"
            [filter]="res.DataType" [field]="res.Name" [title]="res.DisplayName">
            <ng-template kendoGridCellTemplate let-dataItem>
                <input type="checkbox" [checked]="dataItem[res.Name]" />
            </ng-template>
        </kendo-grid-column>

        <kendo-grid-column [hidden]="!res.IsVisible" *ngSwitchCase="'select'" [field]="res.Name"
            [title]="res.DisplayName" [width]="150">
            <ng-template kendoGridEditTemplate let-dataItem="dataItem" let-formGroup="formGroup">
                <kendo-dropdownlist [data]="['categories', 'test']" textField="CategoryName" valueField="CategoryID"
                    [valuePrimitive]="true" [formControl]="formGroup.controls[res.Name]"
                    [value]="DefaultValueForm[res.Name]" (change)="bindingData($event, res.Name)">
                </kendo-dropdownlist>
                <span class="text-danger" *ngIf="submitted && formGroup.get(res.Name).errors?.required">
                    {{res.DisplayName}} is required
                </span>
            </ng-template>
            <ng-template kendoGridCellTemplate let-dataItem>
                {{ dataItem?.[res.Name] }}
            </ng-template>
        </kendo-grid-column>


        <kendo-grid-column [hidden]="!res.IsVisible" *ngSwitchCase="'lookup'" [field]="res.Name"
            [title]="res.DisplayName" [width]="150">
            <ng-template kendoGridEditTemplate let-formGroup="formGroup">
                <app-bi-lookup [BindingProperty]="formGroup.controls[res.Name]"
                    [DataSource]="res.lookupTemplate?.['DataSource']" [Key]="res.lookupTemplate?.['Key']"
                    [DomID]="res.lookupTemplate?.['ID']"></app-bi-lookup>
                <span class="text-danger" *ngIf="submitted && formGroup.get(res.Name).errors?.required">
                    {{res.DisplayName}} is required
                </span>
            </ng-template>
            <ng-template kendoGridCellTemplate let-dataItem>
                {{ dataItem?.[res.Name] }}
            </ng-template>
        </kendo-grid-column>
    </ng-container>
</kendo-grid>